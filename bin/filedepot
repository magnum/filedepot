#!/usr/bin/env ruby
# frozen_string_literal: true

require "filedepot"

# Run setup if config does not exist (first run)
if ARGV[0] != "setup" && !Filedepot::Config.exists?
  puts "~/.filedepot/config.yml not found, let's config it"
  Filedepot::CLI.start(["setup"])
end

# Handle no-args: Thor by default shows help, we want our custom default output
if ARGV.empty?
  Filedepot::CLI.new.invoke(:default)
else
  Filedepot::CLI.start(ARGV)
end
